<%#
   "Helper for rendering the follow/unfollow comments buttons

    Variables:
      post : Post to create the link for
      user : User to check the following status for
"%>

<%= form_tag follow_post_comments_path(post_id: post.id), method: :post do %>
  <% if post.followed_by?(user) %>
    <%= button_tag type: :submit,
                   class: "button is-muted is-outlined is-small js-follow-comments",
                   data: { post_id: post.id, action: 'unfollow' },
                   title: 'Don\'t follow new comment threads on this post',
                   'aria-label': 'Unfollow new comment threads on this post' do %>
      <i class="fas fa-fw fa-bell-slash"></i> Unfollow new
    <% end %>
  <% else %>
    <%= button_tag type: :submit,
                   class: "button is-muted is-outlined is-small js-follow-comments",
                   data: { post_id: post.id, action: 'follow' },
                   title: 'Follow all new comment threads on this post',
                   'aria-label': 'Follow all new comment threads on this post' do %>
      <i class="fas fa-fw fa-bell"></i> Follow new
    <% end %>
  <% end %>
<% end %>
